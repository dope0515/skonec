<? include "../include/head.html" ?>
<!DOCTYPE html>
<html lang="<?=$P_lang?>">
	<head>
		<?
    $P_dp0 = 'main';
    include "../include/meta.html" 
    ?>
	</head>
	<body class="main-body">
		<!-- S : Header -->
		<? include "../include/header.html" ?>
		<!-- E : Header -->
		<main class="main" id="contents">
			<!-- S : main-visual -->
			<section id="about" class="section section-visual">
				<button type="button" class="scroll-down">
					<img src="../../assets/images/main/scroll_down.svg" alt="scroll down">
					<div class="arrow">
						<img src="../../assets/images/icon/faq_arrow.svg" alt=">">
						<img src="../../assets/images/icon/faq_arrow.svg" alt=">">
						<img src="../../assets/images/icon/faq_arrow.svg" alt=">">
						<img src="../../assets/images/icon/faq_arrow.svg" alt=">">
						<img src="../../assets/images/icon/faq_arrow.svg" alt=">">
					</div>
				</button>
				<div class="video-bx">
					<!-- <div class="poster-img">
						<img src="../../assets/images/main/video_poster.jpg" alt="비디오 포스터 이미지">
					</div> -->
					<video src="../../assets/video/main_video_1.mp4" autoplay muted loop></video>
				</div>
			</section>
			<!-- E : main-visual -->
			<!-- S : Episode-->
			<section id="episode" class="section section-episode">
				<div class="container">
					<!-- S : 섹션 타이틀-->
					<div class="sec-tit eng">
						<div class="tit-bx" data-aos="fade-right">
							<h2 class="sub-tit">EPISODE</h2>
							<p class="tit">Mystery Puzzle in<br> Short Story Omnibus Format</p>
						</div>
						<div class="des-bx mt-16" data-aos="fade-left" data-aos-delay="200">
							<p class="des">
								Another Door is a horror/adventure-themed <br>mystery puzzle game
								enjoyed in a short story omnibus format. <br>
								It invites players into immersive virtual worlds
								such as <br>a secret laboratory where you're trapped in hallucinations.
							</p>
						</div>
					</div>
					<!-- E : 섹션 타이틀-->
					<div class="tab-bx">
						<!-- S : 탭 버튼-->
						<ul class="tab-head">
							<li class="ani-effect">
								<button type="button" class="active" data-index="0">Jacob’s Prison</button>
							</li>
							<li class="ani-effect">
								<button type="button" data-index="1">Dolls Room</button>
							</li>
							<li class="ani-effect">
								<button type="button" data-index="2">Secret Lab</button>
							</li>
							<li class="ani-effect">
								<button type="button" data-index="3">Pharaoh’s Curse</button>
							</li>
							<li class="ani-effect">
								<button type="button" data-index="4">Altar Of sun</button>
							</li>
						</ul>
						<!-- E : 탭 버튼-->
						<!-- S : 탭 컨텐츠-->
						<div class="tab-body ani-effect">
							<div class="inner">
								<div class="video-wrap">
									<!-- S : 동영상 박스-->
									<div class="video-bx">
										<iframe id="videoIframe" src="https://www.youtube.com/embed/QSuockCwFDw" title="YouTube video player" frameborder="0" allowfullscreen></iframe>
									</div>
									<!-- E : 동영상 박스-->
								</div>
								<!-- S : 영상 포스터 이미지-->
								<!--권장 이미지사이즈 260 x 405-->
								<div id="posterBx" class="poster-bx" style="background-image: url(../../assets/images/main/poster_1.jpg);">
									<img src="../../assets/images/base_260x405.png" alt="포스터 이미지" loading="lazy">
								</div>
								<!-- E : 영상 포스터 이미지-->
							</div>
							<!-- S : 컨텐츠 내용-->
							<div class="txt-bx">
								<p id="videoTitle" class="tit">Jacob’s Prison</p>
								<div id="videoDescription" class="des">제이콥 박사는 딸을 살리기 위해 사람들을 납치해서 감옥에 가둔 후 실험에 이용한다. 박사가 설치해 놓은 몇 가지 트릭을 풀면 감옥을 나갈 수 있다!<br> 삶에 대한 의지를 보여라, 마지막 기회마저 놓친다면 당신은 실험에 이용되고 처참히 버려질 것이다.</div>
							</div>
							<!-- E : 컨텐츠 내용-->
						</div>
						<!-- E : 탭 컨텐츠-->
					</div>
				</div>
			</section>
			<!-- E : Episode-->
			<!-- S : News -->
			<section id="news" class="section section-news">
				<div class="human-img ani-effect">
					<img src="../../assets/images/main/news_bg.png" alt="사람얼굴">
				</div>
				<div class="container">
					<div class="sec-tit eng">
						<div class="tit-bx">
							<h2 class="sub-tit" data-aos="fade-right">NEWS</h2>
							<p class="tit" data-aos="fade-right" data-aos-delay="100">The Latest on Another Door</p>
						</div>
					</div>
					<ul class="list-bx">
						<? for($i=1; $i < 4; $i++){?>
						<li data-aos="fade-up" data-aos-delay="<?=$i?>00">
							<a href="javascript:void(0)" target="_blank">
								<div class="img-wrap">
									<div class="img-bx" style="background-image: url(../../assets/images/main/news_<?=$i?>.jpg);">
										<img src="../../assets/images/base_460x300.png" alt="소식 이미지" loading="lazy">
									</div>
								</div>
								<div class="txt-bx">
									<div class="top">
										<span class="category">VIRTUAL GAMER TIMES</span>
										<span class="date">2024-07-05</span>
									</div>
									<div class="tit-bx">
										<p class="tit">
											제목 출력영역입니다.
										</p>
									</div>
								</div>
							</a>
						</li>
						<?}?>
					</ul>
				</div>
			</section>
			<!-- E : News -->
			<!-- S : presskit-->
			<section id="presskit" class="section section-press-kit">
				<div class="doll-img ani-effect">
					<img src="../../assets/images/main/doll.png" alt="인형">
				</div>
				<div class="container">
					<!-- S : 섹션 타이틀-->
					<div class="sec-tit eng">
						<div class="tit-bx">
							<h2 class="sub-tit" data-aos="fade-right">PRESS KIT</h2>
							<p class="tit" data-aos="fade-right" data-aos-delay="100">More content</p>
						</div>
						<p class="des" data-aos="fade-left">
							Check out the latest game materials, screenshots, logos, <br> and promotional images, and use them in your content.
							<a href="../episode/episode.html" class="more-btn" data-aos="fade-left" data-aos-delay="100">
								MORE VIEW +
							</a>
						</p>
					</div>
					<!-- E : 섹션 타이틀-->
					<!-- S : 리스트 영역-->
					<ul class="list-bx">
						<li class="ani-effect">
							<button type="button" class="door">
								<div class="front">
									<p class="tit"><span>WALLPAPER</span></p>
								</div>
								<div class="back"></div>
							</button>
							<div class="img-bx">
								<img src="../../assets/images/main/press_kit_1.png" alt="WALLPAPER">
							</div>
							<a href="../episode/episode.html#contents" class="txt-bx">
								<p class="tit"><span>WALLPAPER</span></p>
								<p class="txt">Download Another Door's stunning wallpapers to decorate your desktop and mobile devices.</p>
							</a>
						</li>
						<li class="ani-effect">
							<button type="button" class="door">
								<div class="front">
									<p class="tit"><span>ASSETS</span></p>
								</div>
								<div class="back"></div>
							</button>
							<div class="img-bx">
								<img src="../../assets/images/main/press_kit_2.png" alt="ASSETS">
							</div>
							<a href="../episode/episode.html#contents" class="txt-bx">
								<p class="tit"><span>ASSETS</span></p>
								<p class="txt">Explore various character images and illustrations from the game. We provide high-quality images that capture each character's unique personality.</p>
							</a>
						</li>
						<li class="ani-effect">
							<button type="button" class="door">
								<div class="front">
									<p class="tit"><span>LOGO</span></p>
								</div>
								<div class="back"></div>
							</button>
							<div class="img-bx">
								<img src="../../assets/images/main/press_kit_3.png" alt="WALLPAPER">
							</div>
							<a href="../episode/episode.html#contents" class="txt-bx">
								<p class="tit"><span>LOGO</span></p>
								<p class="txt">Check and download Skonec's game logos. You can use them when creating reviews and content.</p>
							</a>
						</li>
					</ul>
					<!-- E : 리스트 영역-->
				</div>
			</section>
			<!-- E : presskit-->
			<!-- S : media-->
			<section id="support" class="section section-media">
				<div class="container">
					<!-- S : 섹션 타이틀-->
					<div class="sec-tit eng">
						<div class="tit-bx">
							<h2 class="sub-tit" data-aos="fade-right">MEDIA GALLERY</h2>
							<p class="tit" data-aos="fade-right" data-aos-delay="100">a vivid episode</p>
						</div>
					</div>
					<!-- E : 섹션 타이틀-->
					<!-- S : 슬라이드 영역-->		
					<div class="slide-bx">
						<div class="swiper-container">
							<div class="swiper-wrapper">
								<? for($i=0; $i < 5; $i++) {?>
								<div class="swiper-slide">
									<a href="../pop/video-pop.html" class="popup-link">
										<div class="img-bx" style="background-image: url(../../assets/images/main/media_1.jpg);">
											<img src="../../assets/images/base_995x560.png" alt="비디오 썸네일">
										</div>
									</a>
								</div>
								<?}?>
							</div>
						</div>
						<div class="slide-control">
							<button type="button" class="slide-btn slide-prev"></button>
							<button type="button" class="slide-btn slide-next"></button>
						</div>
					</div>
					<div class="swiper-pagination"></div>
					<!-- E : 슬라이드 영역-->
				</div>
			</section>
			<!-- E : media-->
			<!-- S : Notice-->
			<section id="notice" class="section section-notice">
				<div class="watch ani-effect">
					<img src="../../assets/images/main/watch.png" alt="시계">
				</div>
				<div class="container">
					<!-- S : 섹션 타이틀-->
					<div class="sec-tit eng">
						<div class="tit-bx">
							<h2 class="sub-tit" data-aos="fade-right">NOTICE</h2>
							<p class="tit" data-aos="fade-right" data-aos-delay="100">Game Trend Story</p>
						</div>
						<p class="des mt-15" data-aos="fade-left">
							Stay updated with our game's latest news and updates! <br>
							We quickly deliver all information including <br> new episodes, events, patch notes, and more. <br>
							Don't miss out on the latest trends in the game - check them out now.
						</p>
					</div>
					<!-- E : 섹션 타이틀-->
					<!-- S : 리스트 영역-->
					<ul class="list-bx">
						<? for($i=0; $i < 3; $i++) {?>
						<li data-aos="fade-up" data-aos-delay="<?=$i?>00">
							<a href="javascript:void(0)" target="_blank">
								<div class="img-wrap">
									<div class="img-bx" style="background-image: url(../../assets/images/main/notice_1.jpg);">
										<img src="../../assets/images/base_440x300.png" alt="소식 이미지 출력">
									</div>
								</div>
								<div class="txt-bx">
									<p class="tit">
										제목출력영역입니다제목출력영역입니다제목출력
									</p>
									<p class="date">2024.06.08</p>
								</div>
							</a>
						</li>
						<?}?>
					</ul>
					<!-- E : 리스트 영역-->
				</div>
			</section>
			<!-- E : Notice-->
			<!-- S : faq-->
			<section id="faq" class="section section-faq">
				<div class="anubis ani-effect">
					<img src="../../assets/images/main/anubis.png" alt="아누비스">
				</div>
				<div class="bg-bx ani-effect">
					<img src="../../assets/images/main/faq_bg.png" alt="배경 이미지">
				</div>
				<div class="container">
					<div class="sec-tit eng">
						<div class="tit-bx">
							<h2 class="sub-tit" data-aos="fade-right">FAQ</h2>
							<p class="tit" data-aos="fade-right" data-aos-delay="100">FAQ</p>
						</div>
					</div>
					<ul class="list-bx">
						<? for($i=0; $i < 3; $i++) {?>
						<li data-aos="fade-up" data-aos-delay="<?=$i?>00" data-aos-duration="1500">
							<button type="button" class="question">
								<p class="alphabet">
									Q
								</p>
								<p class="tit">이벤트 참여는 어떻게 하나요?</p>
							</button>
							<div class="answer">
								<div class="inner">
									<p class="alphabet">
										A
									</p>
									<div class="board-bx">
										<p>입력한 내용들이 출력됩니다.</p>
										<p>입력한 내용들이 출력됩니다.</p><br>
										<p>입력한 내용들이 출력됩니다.</p>
										<p>입력한 내용들이 출력됩니다.</p>
									</div>
								</div>
							</div>
						</li>
						<?}?>
					</ul>
				</div>
			</section>
			<!-- E : faq-->
		</main>

		<? include "../include/footer.html" ?>
		<? include "../include/js.html" ?>
		<script>
			$(document).ready(function(){
				// /*페이지 초기 진입시 poster 이미지 출력*/
				// setTimeout(function() {
				// 	$('.poster-img').fadeOut(2000, function() { // 1초 동안 fade out
				// 		$('video').fadeIn(500, function() { // 0.5초 동안 fade in
				// 			$(this).get(0).play(); // 비디오 재생
				// 		});
				// 		$('body').removeClass('body-fixed');
				// 	});
				// }, 3000); // 2.5초 뒤에 실행
				// // 페이지가 로드될 때 스크롤을 맨 위로
				// $(window).scrollTop(0);

				// // 페이지를 떠날 때 스크롤 위치를 맨 위로
				// $(window).on('beforeunload', function() {
				// 	$(window).scrollTop(0);
				// });


				/*비디오 탭 스크립트*/
				const videoData = [
					{
						id: "QSuockCwFDw",
						poster: "../../assets/images/main/poster_1.jpg",
						title: "Jacob’s Prison",
						description: "To save his daughter, Dr. Jacob kidnaps people, imprisons them, and uses them for experiments. One day, he doctor hears Amy's voice in his dream. He reflects on what he done and feels guilty. because he was a doctor willing to anything to save Amy. He devises a way to relieve himself of guilt. giving the people he has already kidnapped a chance to get escape. You can get out of prison by solving a few tricks the doctor has set up. If you show strong will to live, you will be able to solve them. If they miss the last chance, they will be used in experiments and miserably abandoned."
					},
					{
						id: "QSuockCwFDw",
						poster: "../../assets/images/main/poster_2.jpg",
						title: "Dolls Room",
						description: "Amy had an incurable disease and was passed away. Jacob cannot accept Amy's death and conducts an experiment. Amy's soul needs to go to heaven, but it can't. Because I didn't want to leave my dad alone. Another reason is that I suffered too much at a young age. The door to Amy's heart is tightly closed and everything is projected onto the house where her memories of her father are. Amy's soul, whose heart has been closed, appears in two forms. In the form of a good child and in the form of an evil devil... Amy, unable to open her own tightly shut heart, decides to get help from someone else. He hopes to lure passers-by into unlocking the house where his mind is projected."
					},
					{
						id: "QSuockCwFDw",
						poster: "../../assets/images/main/poster_3.jpg",
						title: "Secret Lab",
						description: "He encouraged Jacob to kidnap and experiment on people in the name of treating Amy. I knew it was immoral, but I couldn't bear to watch my beloved doctor suffer. Many people were used and sacrificed in experiments, but the results were not good. Having lost all her loved ones, Clara loses control and a different personality emerges. Her dual personality surfaces, leading her to sacrifices even more people. In the end, Clara's experiment become about enjoying the purposeless killing itself. Only someone can escape the lab and press the detonator to stop her rampage. Fortunately, he anticipated that he might be controlled by another personality and created a way to eliminate the lab. To blow up the lab and stop the killings, you need the help of the trapped people."
					},
					{
						id: "QSuockCwFDw",
						poster: "../../assets/images/main/poster_4.jpg",
						title: "Pharaoh’s Curse",
						description: "You can realize the truth of the universe just by looking at the first chapter, An ancient artifact said to grant eternal life. “Emerald Book” The relics remained in the pyramid for thousands of years of history. The player (archaeologist) climbed to the top of the pyramid to find the Emerald Book. The moment you touch the Emerald Book, a trap set by the ancients is activated. The player is trapped inside a pyramid and must solve tricks to escape. You must obtain the Emerald Book."
					},
					{
						id: "QSuockCwFDw",
						poster: "../../assets/images/main/poster_5.jpg",
						title: "Altar of Sun",
						description: "The ancient Mayans displayed outstanding abilities in astronomy. They created a calendar based on their own rules, called the “Zolkin” Among them, Zolkin is hidden in the “Altar of the Sun”. There is a rumor that there is a hidden special ability. The rumor is that “you can see the future by adjusting the calendar time.” Curiosity about the rumor led many archaeologists and explorers Those who set out to find the Altar of the Sun had two results. People who couldn't find the place and people who went missing... The government bans exploration of the area to prevent people from disappearing, but They can't stop people's curiosity Even today, many people set out to find the Altar of Blood in the deep fog of the jungle."
					}
				];

				const videoTabBtn = $('.section-episode .tab-bx .tab-head li button');
				const videoIframe = $('#videoIframe');
				const videoThumb = $('#videoThumb');
				const posterBx = $('#posterBx');
				const videoTitle = $('#videoTitle');
				const videoDescription = $('#videoDescription');
				let currentVideoSrc = '';  // 현재 비디오 src를 저장할 변수
				let canClick = true; // 클릭 가능 여부를 확인하는 변수

				videoTabBtn.on('click', function() {
					if (!canClick || $(this).hasClass('inactive') || $(this).hasClass('active')) return;

					// 클릭 비활성화
					canClick = false;

					$(this).addClass('inactive'); // 비활성화 클래스 추가

					setTimeout(() => {
						$(this).removeClass('inactive'); // 0.3초 후에 비활성화 클래스 제거
					}, 300);

					// 모든 버튼에서 'active' 클래스 제거
					videoTabBtn.removeClass('active');
					videoIframe.fadeOut();
					// 클릭된 버튼에 'active' 클래스 추가
					$(this).addClass('active');
					$('.tab-body').addClass('animating');
					setTimeout(function() {
						$('.tab-body').removeClass('animating');
					}, 1500);

					// 클릭된 버튼의 data-index 값을 가져오기
					const index = $(this).data('index');
					const videoInfo = videoData[index];

					//애니메이션 도중 덜덜거림 방지용 timeout
					setTimeout(function() {
						// 데이터 업데이트
						currentVideoSrc = videoInfo.id;  // 현재 비디오 src 업데이트
						videoIframe.attr('src', 'https://www.youtube.com/embed/' + currentVideoSrc);
						posterBx.css('background-image', 'url(' + videoInfo.poster + ')');
						videoTitle.html(videoInfo.title);
						videoDescription.html(videoInfo.description);
						// 2.5초 후에 클릭 가능하도록 설정
						setTimeout(() => {
							canClick = true;
						}, 1500);
					}, 1000);
					setTimeout(function(){
						videoIframe.fadeIn();
					},1900)
				});

				/*press kit door 애니메이션*/
				const doorBtn = $('.section-press-kit .door');
				doorBtn.on('click',function(){
					if ($(this).parent().hasClass('active')) {
						$(this).parent().removeClass('active');
					}
					else {
						$('.section-press-kit .list-bx li').removeClass('active');
						$(this).parent().toggleClass('active');
					}
				});

				/*media gallery 슬라이드*/
				var swiper = new Swiper(".section-media .swiper-container", {
					slidesPerView: "auto",
					speed: 1000,
					loop: true,
					loopedSlides: 3,
					navigation: {
						nextEl: ".section-media .slide-next",
						prevEl: ".section-media .slide-prev",
					},
					pagination: {
						el: ".section-media .swiper-pagination",
						type: "fraction",
					},
				});

				/*faq-list*/
				$('.section-faq .question').on('click', function(){
					if ($(this).hasClass('inactive')) return;

					$(this).addClass('inactive'); // 비활성화 클래스 추가

					setTimeout(() => {
						$(this).removeClass('inactive'); // 0.3초 후에 비활성화 클래스 제거
					}, 300);

					if ($(this).hasClass('active')) {
						$(this).removeClass('active');
						$(this).next().slideUp();
					} else {
						$('.section-faq .question').removeClass('active');
						$('.section-faq .list-bx li .answer').slideUp();	
						$(this).addClass('active');
						$(this).next().slideDown();
					}
				});
				var link = $('.anchor-list a');
				var linkM = $('.anchor-list-mobile a');

				// Smooth scroll function
				link.on('click', function (e) {
					e.preventDefault();
					var target = $(this).attr('href');
					if (target && $(target).length) {
						var targetPosition = $(target).offset().top;
						$('html, body').animate({
							scrollTop: targetPosition
						}, 500);
					}
				});

				function findPosition() {
					var lastActiveSection = null;

					$('.section').each(function () {
						if ($(this).offset().top - $(window).scrollTop() - 100 < 20) {
							lastActiveSection = $(this).attr('id');
						}
					});

					if (lastActiveSection) {
						link.removeClass('on');
						linkM.removeClass('on');
						var targetId = lastActiveSection;

						// If the last active section is below 'support', keep 'support' active
						if (['notice', 'faq'].includes(targetId)) {
							targetId = 'support';
						}

						$('.anchor-list')
							.find('[data-scroll="' + targetId + '"]')
							.addClass('on');
					}
				}

				$(window).on('scroll', findPosition);
				findPosition();

				// 모바일 nav 링크 클릭시 aside 초기화
				$('.nav-mobile .depth-1 > .link').on('click', function () {
					$('.nav-mobile').removeClass('active');
					$('.nav-mobile__bg').fadeOut();
				});

				// 헤더 로고 클릭 시 페이지 제일 상단으로 이동하기 (메인페이지에서만 기능)
				let acting = false;
				$('.header .logo').on('click', function () {
					if (window.pageYOffset < 50 || acting) return;
					acting = true;
					$('html, body').animate({ scrollTop: 0 }, 600);
					setTimeout(function(){
						acting = false;
					}, 600);
				});

				// Scroll down 버튼 클릭 시
				$('.scroll-down').click(function() {
					$('html, body').animate({
						scrollTop: $('#episode').offset().top
					}, 'slow');
				});

				checkScroll(); // 페이지가 로드될 때 스크롤 위치를 확인하고 클래스 추가

				$(window).scroll(function(){
					checkScroll(); // 스크롤 시에도 스크롤 위치를 확인하고 클래스 추가
				});

				function checkScroll() {
					var curr = $(window).scrollTop();
					var episodeOffset = $('#episode').offset().top;
					
					if(curr > episodeOffset){
						$('.header, .top-btn').addClass('scrolled');
					} else {
						$('.header, .top-btn').removeClass('scrolled');
					}
				}
			});
		</script>
	</body>
</html>
